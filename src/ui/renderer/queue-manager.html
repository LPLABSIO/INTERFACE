<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queue Manager - Bot Manager</title>
    <link rel="stylesheet" href="styles-global.css">
</head>
<body>
    <div class="app-container">
        <!-- Header unifié -->
        <header class="header page-header">
            <div class="header-content">
                <div class="header-brand">
                    <h1 class="app-title">Bot Manager</h1>
                </div>

                <nav class="header-nav">
                    <button class="nav-button" onclick="window.location.href='index.html'">
                        Principal
                    </button>
                    <button class="nav-button" onclick="window.location.href='dashboard.html'">
                        Dashboard
                    </button>
                    <button class="nav-button" onclick="window.location.href='analytics.html'">
                        Analytics
                    </button>
                    <button class="nav-button" data-current-page="true">
                        Queue
                    </button>
                </nav>

                <div class="header-actions">
                    <button id="add-task" class="btn btn--primary">
                        Ajouter Tâche
                    </button>
                    <button id="clear-queue" class="btn btn--danger">
                        Vider Queue
                    </button>
                </div>
            </div>
        </header>

        <!-- Contenu principal -->
        <main class="page-container">
            <div>
                <h2 class="page-title">Queue Manager</h2>
                <p class="page-subtitle">Gestion des tâches et file d'attente d'automatisation</p>
            </div>

            <!-- Statistiques de la queue -->
            <div class="grid-4-cols">
                <div class="metric-card">
                    <div class="metric-card__label">En Attente</div>
                    <div class="metric-card__value" id="queue-pending">12</div>
                    <div class="metric-card__change">
                        Prochaine dans 2 min
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-card__label">En Cours</div>
                    <div class="metric-card__value" id="queue-active">3</div>
                    <div class="metric-card__change metric-card__change--positive">
                        ↑ En progression
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-card__label">Terminées</div>
                    <div class="metric-card__value" id="queue-completed">48</div>
                    <div class="metric-card__change">
                        Aujourd'hui
                    </div>
                </div>

                <div class="metric-card">
                    <div class="metric-card__label">Échecs</div>
                    <div class="metric-card__value" id="queue-failed">2</div>
                    <div class="metric-card__change metric-card__change--negative">
                        ↓ 2 tentatives
                    </div>
                </div>
            </div>

            <!-- Contrôles de la queue -->
            <div class="filters-bar">
                <div class="filter-group">
                    <label class="filter-label">Statut:</label>
                    <select class="select" id="status-filter">
                        <option value="all">Tous</option>
                        <option value="pending">En attente</option>
                        <option value="active">En cours</option>
                        <option value="completed">Terminées</option>
                        <option value="failed">Échouées</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Priorité:</label>
                    <select class="select" id="priority-filter">
                        <option value="all">Toutes</option>
                        <option value="high">Haute</option>
                        <option value="medium">Moyenne</option>
                        <option value="low">Basse</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label class="filter-label">Application:</label>
                    <select class="select" id="app-filter">
                        <option value="all">Toutes</option>
                        <option value="hinge">Hinge</option>
                        <option value="tinder">Tinder</option>
                        <option value="pof">POF</option>
                    </select>
                </div>
                <button class="btn btn--ghost" onclick="pauseQueue()">
                    Pause
                </button>
                <button class="btn btn--success" onclick="resumeQueue()">
                    Reprendre
                </button>
            </div>

            <!-- Tâches en cours -->
            <div style="margin-top: var(--space-lg);">
                <h3 style="color: var(--text-primary); margin-bottom: var(--space-md);">
                    Tâches Actives
                </h3>
                <div class="grid-2-cols">
                    <div class="status-card">
                        <div class="status-card__header">
                            <span class="tag tag--success">EN COURS</span>
                            <span class="tag">PRIORITÉ HAUTE</span>
                        </div>
                        <div class="status-card__body">
                            <h4 style="color: var(--text-primary); margin-bottom: var(--space-sm);">
                                Création compte Hinge #245
                            </h4>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-content">
                                        <div class="activity-description">Appareil: iPhone X</div>
                                        <div class="activity-time">Démarré il y a 3 min</div>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top: var(--space-md);">
                                <div class="progress-bar progress-bar--success">
                                    <div class="progress-bar__fill" style="width: 65%"></div>
                                </div>
                                <small style="color: var(--text-muted);">Étape 3/5 - Vérification email</small>
                            </div>
                        </div>
                    </div>

                    <div class="status-card">
                        <div class="status-card__header">
                            <span class="tag tag--success">EN COURS</span>
                            <span class="tag tag--warning">PRIORITÉ MOYENNE</span>
                        </div>
                        <div class="status-card__body">
                            <h4 style="color: var(--text-primary); margin-bottom: var(--space-sm);">
                                Création compte Tinder #246
                            </h4>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-content">
                                        <div class="activity-description">Appareil: iPhone 11</div>
                                        <div class="activity-time">Démarré il y a 1 min</div>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top: var(--space-md);">
                                <div class="progress-bar progress-bar--warning">
                                    <div class="progress-bar__fill" style="width: 30%"></div>
                                </div>
                                <small style="color: var(--text-muted);">Étape 2/6 - Configuration profil</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Queue Table -->
            <div style="margin-top: var(--space-lg);">
                <div class="action-bar">
                    <div class="action-bar__left">
                        <h3 style="color: var(--text-primary);">File d'Attente</h3>
                    </div>
                    <div class="action-bar__right">
                        <button class="btn btn--small btn--ghost" onclick="sortQueue('priority')">
                            Trier par Priorité
                        </button>
                        <button class="btn btn--small btn--ghost" onclick="sortQueue('time')">
                            Trier par Temps
                        </button>
                    </div>
                </div>

                <table class="data-table" id="queue-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Type</th>
                            <th>Application</th>
                            <th>Appareil</th>
                            <th>Priorité</th>
                            <th>Ajouté</th>
                            <th>Statut</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#247</td>
                            <td>Création compte</td>
                            <td>Hinge</td>
                            <td>iPhone X</td>
                            <td><span class="tag tag--danger">HAUTE</span></td>
                            <td>14:45</td>
                            <td><span class="badge badge--warning">EN ATTENTE</span></td>
                            <td>
                                <button class="btn btn--small btn--ghost">Démarrer</button>
                                <button class="btn btn--small btn--ghost">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td>#248</td>
                            <td>Création compte</td>
                            <td>POF</td>
                            <td>iPhone 12</td>
                            <td><span class="tag tag--warning">MOYENNE</span></td>
                            <td>14:50</td>
                            <td><span class="badge badge--warning">EN ATTENTE</span></td>
                            <td>
                                <button class="btn btn--small btn--ghost">Démarrer</button>
                                <button class="btn btn--small btn--ghost">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td>#249</td>
                            <td>Vérification</td>
                            <td>Tinder</td>
                            <td>iPhone 11</td>
                            <td><span class="tag">BASSE</span></td>
                            <td>14:55</td>
                            <td><span class="badge badge--warning">EN ATTENTE</span></td>
                            <td>
                                <button class="btn btn--small btn--ghost">Démarrer</button>
                                <button class="btn btn--small btn--ghost">Supprimer</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Historique récent -->
            <div class="grid-2-cols" style="margin-top: var(--space-lg);">
                <!-- Tâches terminées -->
                <div>
                    <h3 style="color: var(--text-primary); margin-bottom: var(--space-md);">
                        Récemment Terminées
                    </h3>
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-time">Il y a 5 min</div>
                            <div class="timeline-content">
                                <strong>#244 - Hinge</strong> - Succès
                                <div style="color: var(--text-muted); font-size: 12px;">
                                    Durée: 4m 32s
                                </div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-time">Il y a 12 min</div>
                            <div class="timeline-content">
                                <strong>#243 - Tinder</strong> - Succès
                                <div style="color: var(--text-muted); font-size: 12px;">
                                    Durée: 3m 15s
                                </div>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-time">Il y a 20 min</div>
                            <div class="timeline-content">
                                <strong>#242 - POF</strong> - Échec
                                <div style="color: var(--danger); font-size: 12px;">
                                    Erreur: Timeout vérification
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configuration de priorité -->
                <div>
                    <h3 style="color: var(--text-primary); margin-bottom: var(--space-md);">
                        Règles de Priorité
                    </h3>
                    <div class="activity-list">
                        <div class="activity-item">
                            <div class="activity-icon" style="background: var(--danger-light);">
                                1
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Priorité Haute</div>
                                <div class="activity-description">
                                    Tâches critiques - Exécution immédiate
                                </div>
                            </div>
                            <button class="btn btn--small btn--ghost">Configurer</button>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon" style="background: var(--warning-light);">
                                2
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Priorité Moyenne</div>
                                <div class="activity-description">
                                    Tâches standard - Délai 5-10 min
                                </div>
                            </div>
                            <button class="btn btn--small btn--ghost">Configurer</button>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon" style="background: var(--bg-tertiary);">
                                3
                            </div>
                            <div class="activity-content">
                                <div class="activity-title">Priorité Basse</div>
                                <div class="activity-description">
                                    Tâches différables - Quand disponible
                                </div>
                            </div>
                            <button class="btn btn--small btn--ghost">Configurer</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal d'ajout de tâche -->
    <div id="task-modal" class="modal">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h2 class="modal__title">Nouvelle Tâche</h2>
                <button class="modal__close">&times;</button>
            </div>
            <div class="modal__body">
                <div class="form-group">
                    <label class="form-label">Type de tâche</label>
                    <select class="select">
                        <option>Création de compte</option>
                        <option>Vérification</option>
                        <option>Maintenance</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Application</label>
                    <select class="select">
                        <option>Hinge</option>
                        <option>Tinder</option>
                        <option>POF</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Appareil</label>
                    <select class="select">
                        <option>iPhone X</option>
                        <option>iPhone 11</option>
                        <option>iPhone 12</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Priorité</label>
                    <select class="select">
                        <option>Haute</option>
                        <option>Moyenne</option>
                        <option>Basse</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Nombre de comptes</label>
                    <input type="number" class="input" value="1" min="1" max="10">
                </div>
            </div>
            <div class="modal__footer">
                <button class="btn btn--ghost">Annuler</button>
                <button class="btn btn--primary">Ajouter à la Queue</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Queue Manager initialized');

            // Add task
            document.getElementById('add-task')?.addEventListener('click', () => {
                const modal = document.getElementById('task-modal');
                if (modal) {
                    modal.classList.add('modal--active');
                }
            });

            // Modal close
            document.querySelector('.modal__close')?.addEventListener('click', () => {
                const modal = document.getElementById('task-modal');
                if (modal) {
                    modal.classList.remove('modal--active');
                }
            });

            // Filters
            document.getElementById('status-filter')?.addEventListener('change', filterQueue);
            document.getElementById('priority-filter')?.addEventListener('change', filterQueue);
            document.getElementById('app-filter')?.addEventListener('change', filterQueue);

            // Update stats every 5 seconds
            setInterval(updateQueueStats, 5000);
        });

        function filterQueue() {
            console.log('Filtering queue...');
            // Logique de filtrage
        }

        function updateQueueStats() {
            // Mise à jour des statistiques
            document.getElementById('queue-pending').textContent =
                Math.floor(Math.random() * 20);
            document.getElementById('queue-active').textContent =
                Math.floor(Math.random() * 5);
        }

        function pauseQueue() {
            console.log('Queue paused');
        }

        function resumeQueue() {
            console.log('Queue resumed');
        }

        function sortQueue(by) {
            console.log('Sorting queue by:', by);
        }
    </script>
</body>
</html>